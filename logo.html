<!-- Pega este bloque una sola vez -->
<script type="module">
class CorpLogo extends HTMLElement {
  constructor(){
    super();
    const root = this.attachShadow({mode:"open"});
    const color = this.getAttribute("color") || "#79C3FF";
    const dur   = this.getAttribute("duration") || "8s";
    const stroke= this.getAttribute("stroke") || "12";   // grosor del trazo
    const dot   = this.getAttribute("dot")    || "12";   // radio de cada nodo
    const start = this.getAttribute("start")  || "immediate"; // "immediate" | "visible"

    root.innerHTML = `
      <style>
        :host{
          display:inline-block;
          inline-size:var(--size,200px);
          block-size:var(--size,200px);
          color:var(--color, ${color});
          --dur:${dur};
          --stroke:${stroke};
          --dot:${dot};
        }
        svg{width:100%;height:100%;overflow:visible}

        /* Trazo: escondido al inicio para evitar "puntos previos" */
        .stroke{
          fill:none;
          stroke:currentColor;
          stroke-width:calc(var(--stroke) * 1px);
          stroke-linecap:round;
          stroke-linejoin:round;
          stroke-dasharray:1;
          stroke-dashoffset:1;
          opacity:0;
        }

        /* Nodos: se muestran al final, sin trazo, tamaÃ±o menor */
        .dot{
          fill:currentColor;
          transform-box:fill-box;
          transform-origin:center;
          transform:scale(0);
          opacity:0;
        }

        .glow{filter:url(#glow)}

        @keyframes draw{to{stroke-dashoffset:0;opacity:1}}
        @keyframes puff{to{transform:scale(1);opacity:.95}}

        /* Secuencia: anillo -> radios desde el centro -> nodos */
        :host(.play) .ring{
          animation:draw linear forwards;
          animation-duration:calc(var(--dur) * .30);
        }
        :host(.play) .spoke{
          animation:draw linear forwards;
          animation-duration:calc(var(--dur) * .12);
          animation-delay:calc(var(--dur) * (.30 + var(--i) * .08));
        }
        :host(.play) .dot{
          animation:puff ease-out forwards;
          animation-duration:calc(var(--dur) * .10);
          animation-delay:calc(var(--dur) * (.40 + var(--i) * .08));
        }

        @media (prefers-reduced-motion: reduce){
          .stroke{stroke-dashoffset:0;opacity:1}
          .dot{transform:none;opacity:.95}
        }
      </style>

      <svg viewBox="0 0 200 200" role="img" aria-label="Logo corporativo animado">
        <defs>
          <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="8" result="b"/>
            <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
          </filter>
        </defs>

        <g class="glow">
          <!-- Toroide central: SOLO trazo -->
          <circle class="stroke ring" pathLength="1" cx="100" cy="100" r="34"/>

          <!-- Seis brazos: nacen del borde del toroide y avanzan hacia afuera -->
          <g style="--i:0" transform="rotate(0 100 100)">
            <line class="stroke spoke" pathLength="1" x1="100" y1="60" x2="100" y2="32"/>
            <circle class="dot" cx="100" cy="20" r="${dot}"/>
          </g>
          <g style="--i:1" transform="rotate(60 100 100)">
            <line class="stroke spoke" pathLength="1" x1="100" y1="60" x2="100" y2="32"/>
            <circle class="dot" cx="100" cy="20" r="${dot}"/>
          </g>
          <g style="--i:2" transform="rotate(120 100 100)">
            <line class="stroke spoke" pathLength="1" x1="100" y1="60" x2="100" y2="32"/>
            <circle class="dot" cx="100" cy="20" r="${dot}"/>
          </g>
          <g style="--i:3" transform="rotate(180 100 100)">
            <line class="stroke spoke" pathLength="1" x1="100" y1="60" x2="100" y2="32"/>
            <circle class="dot" cx="100" cy="20" r="${dot}"/>
          </g>
          <g style="--i:4" transform="rotate(240 100 100)">
            <line class="stroke spoke" pathLength="1" x1="100" y1="60" x2="100" y2="32"/>
            <circle class="dot" cx="100" cy="20" r="${dot}"/>
          </g>
          <g style="--i:5" transform="rotate(300 100 100)">
            <line class="stroke spoke" pathLength="1" x1="100" y1="60" x2="100" y2="32"/>
            <circle class="dot" cx="100" cy="20" r="${dot}"/>
          </g>
        </g>
      </svg>
    `;

    const play = () => this.classList.add("play");
    if (start === "visible") {
      const io = new IntersectionObserver(es=>{
        if (es.some(e=>e.isIntersecting)) { play(); io.disconnect(); }
      },{threshold:.6});
      io.observe(this);
    } else {
      requestAnimationFrame(play);
    }
  }
}
customElements.define("corp-logo", CorpLogo);
</script>

<!-- Uso (un solo logo) -->
<corp-logo style="--size:220px" duration="8s" stroke="12" dot="12"></corp-logo>
